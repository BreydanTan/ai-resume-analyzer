# 架构可视化 | Architecture Visuals

## 欢迎来到项目的"全景之旅"

在这一章，我们用**日常类比和ASCII图**来理解这个项目的全部架构。

---

## 1. 用餐厅类比解释全局架构

想象你要去一个新开的"AI简历评分餐厅"：

```
┌──────────────────────────────────────────────────────────────┐
│                    AI简历评分餐厅                            │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  🍽️ 收银员 (React)                                          │
│  ├─ 欢迎你进来                                              │
│  ├─ 给你菜单(组件)                                          │
│  └─ 收集你的订单(用户输入)                                  │
│                                                              │
│  📋 服务员 (Zustand)                                        │
│  ├─ 记住你的订单                                            │
│  ├─ 记住你喜欢什么                                          │
│  └─ 在你需要时随时提醒                                      │
│                                                              │
│  🎨 装饰 (Tailwind CSS)                                    │
│  ├─ 餐厅看起来漂亮                                          │
│  ├─ 菜单清晰易读                                            │
│  └─ 按钮和表单好用                                          │
│                                                              │
└──────────────────────────────────────────────────────────────┘
                           ↓
                (你点击"上传简历"按钮)
                           ↓
┌──────────────────────────────────────────────────────────────┐
│                  厨房 (云端服务)                             │
│                                                              │
│  🔐 身份验证区 (Puter Auth)                                │
│  ├─ 确认你是真实用户                                        │
│  └─ 保存你的身份信息                                        │
│                                                              │
│  📦 接收区 (Puter File System)                             │
│  ├─ 接收你的简历PDF                                        │
│  ├─ 存放在云端冰箱                                          │
│  └─ 生成缩略图(便利贴)                                      │
│                                                              │
│  📝 笔记本 (Puter KV Store)                                │
│  ├─ 记录简历信息: resume:abc123 → {...}                   │
│  ├─ 记录评分: score:abc123 → 85分                          │
│  └─ 后来查询时快速检索                                      │
│                                                              │
│  🤖 AI评审官 (Claude)                                      │
│  ├─ 仔细阅读你的简历                                        │
│  ├─ 从5个维度评估                                          │
│  ├─ 给出分数和建议                                          │
│  └─ 返回详细反馈                                            │
│                                                              │
└──────────────────────────────────────────────────────────────┘
                           ↓
           (等待...评审官在工作...⏳)
                           ↓
┌──────────────────────────────────────────────────────────────┐
│              餐厅前台 (你的浏览器)                            │
│                                                              │
│  显示结果:                                                  │
│  ┌─────────────────────────────────────┐                   │
│  │  简历: Google Frontend Engineer      │                   │
│  │  总分: 85/100 ████████░░            │                   │
│  │  ATS兼容性: 90/100                  │                   │
│  │  改进建议: ...                       │                   │
│  └─────────────────────────────────────┘                   │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**关键学习点**:
- 浏览器是"前厅" - 用户看到的部分
- 云端是"厨房" - 幕后处理的部分
- 数据存储是"冰箱" - 长期保存信息
- AI是"评审官" - 智能处理的部分

---

## 2. 数据流动图：用户点击到返回结果

### 场景：用户上传简历进行评分

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                    时间流：用户上传简历                      ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

时刻1️⃣  [用户在浏览器]
       └─ 点击"上传简历"按钮
           │
           ├─ React 组件接收点击事件
           ├─ Zustand 记住"我在上传状态"
           └─ 页面显示文件选择框

时刻2️⃣  [用户选择文件]
       └─ 用户在电脑选择 resume.pdf
           │
           ├─ React 接收文件对象
           ├─ Zustand 存储"文件已选"
           └─ 页面显示"文件已选，点击上传"

时刻3️⃣  [上传到云端] ⬆️
       └─ 用户点击"确认上传"
           │
           ├─ Puter.js SDK 接收文件
           ├─ Puter File System 上传到云
           │  └─ /home/user_123/resume.pdf (保存在云)
           │
           ├─ PDF转图片工具处理
           │  └─ /home/user_123/resume_preview.png (缩略图)
           │
           └─ 返回文件路径给 React

时刻4️⃣  [保存元数据] 💾
       └─ React 准备简历信息
           {
             id: "abc123",
             companyName: "Google",
             jobTitle: "Frontend",
             resumePath: "/home/user_123/resume.pdf",
             imagePath: "/home/user_123/resume_preview.png",
             feedback: null (还没有评分)
           }
           │
           ├─ Puter KV 存储这个数据
           │  └─ 键: "resume:abc123"
           │  └─ 值: 上面的JSON
           │
           └─ Zustand 记住"上传完成"

时刻5️⃣  [AI开始分析] 🤖
       └─ React 调用 AI 分析功能
           │
           ├─ 构建提示词:
           │  "请分析这份简历，职位是Frontend, 描述是..."
           │
           ├─ Puter.ai 调用 Claude (AI模型)
           │  └─ 发送: resume.pdf 路径 + 提示词
           │
           └─ 等待 Claude 回复...
               (这个过程需要 5-30秒)

时刻6️⃣  [AI返回结果] ✉️
       └─ Claude 返回评分
           {
             overallScore: 85,
             ATS: { score: 90, tips: [...] },
             toneAndStyle: { score: 88, tips: [...] },
             content: { score: 80, tips: [...] },
             structure: { score: 82, tips: [...] },
             skills: { score: 85, tips: [...] }
           }
           │
           ├─ React 接收评分数据
           ├─ Zustand 存储评分到"全局记忆"
           └─ Puter KV 更新简历数据
              └─ 把评分加入到 resume:abc123

时刻7️⃣  [显示结果] 🎨
       └─ React 重新渲染页面
           │
           ├─ 获取 Zustand 中存储的数据
           ├─ 用 Tailwind CSS 美化
           ├─ 显示:
           │  ✅ 总分圆圈 (85分)
           │  ✅ 五维度分数 (ATS, Tone, Content...)
           │  ✅ 改进建议列表
           │  ✅ 优点列表
           │
           └─ 用户在浏览器看到漂亮的报告 👍

时刻8️⃣  [保存历史] 📚
       └─ 用户下次打开应用
           │
           ├─ React 从 Zustand 读取(如果仍在浏览器)
           ├─ 或从 Puter KV 读取(如果关闭后重新打开)
           │  └─ 列出所有 resume:* 的键
           │  └─ 显示之前上传过的所有简历
           │
           └─ 用户能看到历史记录
               (即使过了几个月也还在!)
```

### 完整的时间顺序总结

```
用户行动           →  React处理        →  数据层        →  云端服务
│                    │                  │                │
1. 点击上传         1. 组件识别点击    1. Zustand记住  1. -
2. 选择文件         2. 弹出选择框      2. 保存文件对象  2. -
3. 确认上传         3. 调用上传函数    3. 读取文件      3. Puter.fs上传
4. 等待处理         4. 显示加载中      4. 转换PDF→图片  4. File System处理
5. -                5. 收到响应后      5. 保存路径      5. 返回文件路径
6. -                6. 调用AI分析      6. 构建JSON      6. Puter.kv保存
7. -                7. 展示AI结果      7. 存储评分      7. Claude AI分析
8. 下次打开         8. 显示历史        8. 读取数据      8. KV返回数据
```

---

## 3. 文件组织图（图书馆分类类比）

想象这个项目是一个图书馆：

```
┌─────────────────────────────────────────────────────────────┐
│                   AI简历图书馆                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🚪 门厅 (根目录)                                          │
│  ├─ 📘 README.md (欢迎词和简介)                            │
│  ├─ 📦 package.json (借书证 - 需要哪些工具)               │
│  ├─ ⚙️ vite.config.ts (图书馆规则)                        │
│  └─ 🐳 Dockerfile (打包搬家用)                            │
│                                                             │
│  📚 主书架 (app/)                                          │
│  │                                                          │
│  ├─ 📖 routes/ (五本不同的书)                             │
│  │  ├─ 📕 home.tsx (首页书 - 简历列表)                    │
│  │  │  └─ 标签: 显示所有简历, 分数统计                    │
│  │  │  └─ 关键词: loop, map, Tailwind样式                 │
│  │  │                                                       │
│  │  ├─ 📗 auth.tsx (登录书 - 用户认证)                    │
│  │  │  └─ 标签: Puter登录, 状态管理                      │
│  │  │  └─ 关键词: signIn, isSignedIn, useEffect           │
│  │  │                                                       │
│  │  ├─ 📙 upload.tsx (上传书 - 处理文件上传)             │
│  │  │  └─ 标签: 文件处理, AI调用, 数据存储                │
│  │  │  └─ 关键词: fs.upload, ai.feedback, kv.set         │
│  │  │                                                       │
│  │  ├─ 📔 resume.tsx (详情书 - 显示评分)                  │
│  │  │  └─ 标签: 组件展示, 数据展示                        │
│  │  │  └─ 关键词: ScoreCircle, Summary, Details          │
│  │  │                                                       │
│  │  └─ 📒 wipe.tsx (清除书 - 清空所有数据)               │
│  │     └─ 标签: 危险操作, 确认对话                        │
│  │     └─ 关键词: kv.flush, fs.delete                    │
│  │                                                          │
│  ├─ 🧩 components/ (积木库)                               │
│  │  ├─ 🔧 Navbar.tsx - 导航栏(顶部菜单)                   │
│  │  ├─ 🔧 ResumeCard.tsx - 简历卡片(一张卡)               │
│  │  ├─ 🔧 ScoreCircle.tsx - 分数圆(大圆圈)                │
│  │  ├─ 🔧 ScoreBadge.tsx - 分数徽章(小标签)               │
│  │  ├─ 🔧 Summary.tsx - 摘要(总结区)                      │
│  │  ├─ 🔧 Details.tsx - 详情(五维度)                      │
│  │  ├─ 🔧 ATS.tsx - ATS分析(ATS专项)                      │
│  │  ├─ 🔧 Accordion.tsx - 折叠面板(可展开的内容)          │
│  │  ├─ 🔧 FileUploader.tsx - 文件上传器(拖拽上传)         │
│  │  └─ 🔧 ... 更多组件                                    │
│  │                                                          │
│  ├─ 🛠️ lib/ (工具箱)                                      │
│  │  ├─ 🔨 puter.ts (Puter工具 - 云服务包装)             │
│  │  │  └─ 导出: usePuterStore (全局状态)                 │
│  │  │  └─ 包含: 认证、文件、KV、AI等所有操作             │
│  │  │  └─ 456行代码, 项目的核心!                         │
│  │  │                                                       │
│  │  ├─ 🔨 pdf2img.ts (PDF工具 - 转换PDF为图片)         │
│  │  │  └─ 导出: pdfToImage() 函数                        │
│  │  │  └─ 使用: pdfjs-dist 库                            │
│  │  │                                                       │
│  │  ├─ 🔨 utils.ts (通用工具 - 杂项函数)                 │
│  │  │  └─ 导出: formatDate, calculateScore等            │
│  │  │                                                       │
│  │  └─ 🔨 ... 更多工具                                    │
│  │                                                          │
│  ├─ 🎨 app.css (装饰 - 全局样式)                          │
│  │  └─ 包含: Tailwind配置, 自定义CSS                    │
│  │                                                          │
│  ├─ 🗺️ routes.ts (导航图 - 页面路由)                      │
│  │  └─ 定义: 哪个URL对应哪个页面                         │
│  │  └─ 例: / → home.tsx, /upload → upload.tsx            │
│  │                                                          │
│  └─ 📄 root.tsx (壳 - 页面容器)                           │
│     └─ 包含: Navbar, 页面outlet                           │
│     └─ 加载: Puter.js SDK                                 │
│                                                             │
│  ⚙️ constants/ (常数库)                                   │
│  └─ index.ts (示例数据, AI响应格式, 提示词)               │
│                                                             │
│  📋 types/ (类型库)                                       │
│  ├─ index.d.ts (所有TypeScript类型定义)                  │
│  └─ puter.d.ts (Puter相关类型)                           │
│                                                             │
│  🖼️ public/ (公开区)                                      │
│  ├─ icons/ (图标)                                          │
│  ├─ images/ (图片)                                         │
│  └─ readme/ (README用的图)                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**关键比喻**:
- `routes/` = 不同的房间(页面)
- `components/` = 可以在各房间重复使用的家具
- `lib/` = 工具箱，解决各种问题
- `types/` = 说明书，告诉你什么是什么
- `constants/` = 常用物品的标准规格

---

## 4. 技术栈层次图（蛋糕层类比）

```
┌─────────────────────────────────────────────────────────────┐
│                  这个项目的技术"蛋糕"                        │
└─────────────────────────────────────────────────────────────┘

┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                   第6层: 部署和运行环境                      ┃
┃                    Docker / Vercel / VPS                    ┃
┃  (就像把蛋糕打包送到饭店的冷柜里)                          ┃
┃  └─ npm run build → npm run start                          ┃
┃  └─ 用户在真实网址上访问应用                               ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
                            ▲
                            │ 构建输出
                            │
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃               第5层: 构建工具和优化                          ┃
┃                    Vite 6.3.3                              ┃
┃  (就像烤蛋糕的烤箱，把原材料变成成品)                      ┃
┃  └─ 编译TypeScript → JavaScript                            ┃
┃  └─ 打包CSS → 最小化样式文件                               ┃
┃  └─ 代码分割 → 用户只下载需要的部分                        ┃
┃  └─ 资源优化 → 图片、字体压缩                              ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
                            ▲
                            │ 源代码
                            │
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                第4层: 开发框架和库                           ┃
┃  ┌─────────────────────────────────────┐                  ┃
┃  │ React 19.1.0 (UI构建)               │                  ┃
┃  │ - 组件化开发                         │                  ┃
┃  │ - 状态管理                           │                  ┃
┃  │ - 重新渲染优化                       │                  ┃
┃  └─────────────────────────────────────┘                  ┃
┃  ┌─────────────────────────────────────┐                  ┃
┃  │ React Router 7.5.3 (页面导航)       │                  ┃
┃  │ - / → home.tsx                      │                  ┃
┃  │ - /upload → upload.tsx              │                  ┃
┃  │ - /resume/:id → resume.tsx          │                  ┃
┃  └─────────────────────────────────────┘                  ┃
┃  ┌─────────────────────────────────────┐                  ┃
┃  │ Zustand 5.0.6 (状态管理)           │                  ┃
┃  │ - 全局"记忆"用户操作                │                  ┃
┃  │ - 谁登录了？什么在上传？             │                  ┃
┃  └─────────────────────────────────────┘                  ┃
┃  ┌─────────────────────────────────────┐                  ┃
┃  │ Tailwind CSS 4.1.4 (样式)          │                  ┃
┃  │ - 快速美化UI                         │                  ┃
┃  │ - 按钮、卡片、表单               │                  ┃
┃  └─────────────────────────────────────┘                  ┃
┃  ┌─────────────────────────────────────┐                  ┃
┃  │ TypeScript 5.8.3 (类型检查)        │                  ┃
┃  │ - 防止"输入错误"                     │                  ┃
┃  │ - 代码提示                           │                  ┃
┃  └─────────────────────────────────────┘                  ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
                            ▲
                            │ API调用
                            │
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                  第3层: 云服务SDK集成                        ┃
┃                   Puter.js v2                              ┃
┃  (就像蛋糕的各种配料库：黄油、糖、面粉等)                  ┃
┃  ┌──────────────┬──────────────┬──────────────┐            ┃
┃  │ 认证 Auth    │ 文件 FS      │ AI 智能       │            ┃
┃  │ signIn()     │ upload()     │ feedback()    │            ┃
┃  │ getUser()    │ read()       │ chat()        │            ┃
┃  │ isSignedIn() │ delete()     │ img2txt()     │            ┃
┃  └──────────────┴──────────────┴──────────────┘            ┃
┃  ┌──────────────┐                                          ┃
┃  │ KV 存储      │                                          ┃
┃  │ get()        │                                          ┃
┃  │ set()        │                                          ┃
┃  │ delete()     │                                          ┃
┃  └──────────────┘                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
                            ▲
                            │ HTTP/HTTPS
                            │
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                   第2层: 云端基础设施                        ┃
┃                    Puter.com 平台                          ┃
┃  (就像蛋糕工厂，提供所有配料和工具)                        ┃
┃  ┌──────────────┬──────────────┬──────────────┐            ┃
┃  │ 用户账户     │ 云存储       │ AI服务       │            ┃
┃  │ (身份)       │ (冰箱)       │ (评审官)     │            ┃
┃  │              │              │              │            ┃
┃  │ 用户数据库   │ 文件系统     │ Claude 3.7   │            ┃
┃  │ 权限控制     │ 版本管理     │ Sonnet       │            ┃
┃  └──────────────┴──────────────┴──────────────┘            ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
                            ▲
                            │ 网络
                            │
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                  第1层: 用户设备和网络                       ┃
┃              用户的电脑、浏览器、网络连接                    ┃
┃  (就像厨师和食客)                                          ┃
┃  ┌──────────────────────────────────────────┐             ┃
┃  │  浏览器 (Chrome, Firefox, Safari)        │             ┃
┃  │  ├─ 显示漂亮的网页                        │             ┃
┃  │  ├─ 接收用户点击                          │             ┃
┃  │  ├─ 运行JavaScript代码                   │             ┃
┃  │  └─ 发送和接收网络请求                    │             ┃
┃  └──────────────────────────────────────────┘             ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

**蛋糕的每一层做什么?**

| 层级 | 名称 | 做什么 | 类比 |
|------|------|--------|------|
| 1️⃣ | 用户设备 | 显示网页，接收点击 | 食客吃饭 |
| 2️⃣ | 云基础设施 | 存储数据，运行AI | 蛋糕工厂 |
| 3️⃣ | SDK集成 | 连接各种云服务 | 配料和工具 |
| 4️⃣ | 开发框架 | 构建界面，管理状态 | 烤蛋糕的方法 |
| 5️⃣ | 构建工具 | 优化代码和资源 | 蛋糕包装和质检 |
| 6️⃣ | 部署环境 | 让应用可以访问 | 蛋糕送到店里 |

---

## 5. 请求/响应循环图

### 场景：用户上传简历并获得评分

```
┌────────────────────────────────┐
│      用户的浏览器               │
│  ┌──────────────────────────┐  │
│  │  React 应用              │  │
│  │  ┌────────────────────┐  │  │
│  │  │ 显示上传表单       │  │  │
│  │  │ - 文件选择         │  │  │
│  │  │ - 公司和职位输入   │  │  │
│  │  └────────────────────┘  │  │
│  │           │              │  │
│  │           │ 用户输入      │  │
│  │           ▼              │  │
│  │  ┌────────────────────┐  │  │
│  │  │ Zustand 记住数据   │  │  │
│  │  │ - 选了哪个文件     │  │  │
│  │  │ - 输了什么信息     │  │  │
│  │  └────────────────────┘  │  │
│  │           │              │  │
│  │           │ 点击上传      │  │
│  │           ▼              │  │
│  │  ┌────────────────────┐  │  │
│  │  │ 用户点击上传按钮   │  │  │
│  │  │ 页面显示加载状态   │  │  │
│  │  └────────────────────┘  │  │
│  └──────────────────────────┘  │
│           │                      │
└───────────┼──────────────────────┘
            │
            │ ⬆️ 发送请求
            │ - 简历PDF文件
            │ - 职位描述
            │
┌───────────▼──────────────────────┐
│    Puter.js SDK (桥梁)           │
│  - 把浏览器数据转换成网络请求     │
└───────────┬──────────────────────┘
            │
            │ HTTPS 加密通道
            │
┌───────────▼──────────────────────┐
│   Puter.com 云平台               │
│                                  │
│  ┌────────────────────────────┐ │
│  │ 1. 接收文件                │ │
│  │    └─ resume.pdf (保存)   │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ 2. 转换为图片              │ │
│  │    └─ preview.png (生成)   │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ 3. 调用AI分析              │ │
│  │    └─ Claude 分析...      │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ 4. 保存元数据              │ │
│  │    resume:abc123 → {...}  │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ 5. 返回评分结果            │ │
│  │    {score: 85, tips: []}   │ │
│  └────────────────────────────┘ │
│                                  │
└───────────┬──────────────────────┘
            │
            │ ⬇️ 返回响应
            │ - 评分数据 (JSON)
            │ - 改进建议
            │
┌───────────▼──────────────────────┐
│    Puter.js SDK (解析)           │
│  - 把网络响应转换成JavaScript对象 │
└───────────┬──────────────────────┘
            │
┌───────────▼──────────────────────┐
│   用户的浏览器                    │
│  ┌──────────────────────────────┐│
│  │ React 接收评分数据           ││
│  │ - 总分: 85                   ││
│  │ - ATS: 90                    ││
│  │ - 内容: 80                   ││
│  │ - ...                        ││
│  └──────────────────────────────┘│
│           │                       │
│           ▼                       │
│  ┌──────────────────────────────┐│
│  │ Zustand 更新全局状态         ││
│  │ - "上传完成"                  ││
│  │ - "有新的评分数据"            ││
│  └──────────────────────────────┘│
│           │                       │
│           ▼                       │
│  ┌──────────────────────────────┐│
│  │ React 重新渲染页面           ││
│  │ 显示评分和建议 ✅            ││
│  └──────────────────────────────┘│
│                                  │
└──────────────────────────────────┘
```

---

## 6. 组件关系图

```
                    ┌─────────────────┐
                    │   root.tsx      │ 根容器
                    │   (页面框架)     │
                    └────────┬────────┘
                             │
          ┌──────────────────┼──────────────────┐
          │                  │                  │
          ▼                  ▼                  ▼
     ┌────────────┐    ┌───────────┐    ┌──────────────┐
     │ Navbar.tsx │    │ Outlet    │    │ Footer.tsx   │
     │ (导航栏)    │    │ (页面内容) │    │ (页脚)       │
     └────────────┘    └─────┬─────┘    └──────────────┘
                              │
              ┌───────────────┼───────────────┐
              │               │               │
              ▼               ▼               ▼
         ┌─────────┐    ┌──────────┐   ┌──────────┐
         │home.tsx │    │upload.   │   │resume.   │
         │(首页)    │    │tsx       │   │tsx       │
         │         │    │(上传页)   │   │(详情页)  │
         └────┬────┘    └────┬─────┘   └────┬─────┘
              │               │              │
              ▼               ▼              ▼
        ┌──────────────┐  ┌──────────┐  ┌──────────────┐
        │ResumeCard    │  │FileUpload│  │Summary       │
        │.tsx          │  │er.tsx    │  │.tsx          │
        │(卡片)        │  │(文件框)   │  │(摘要)        │
        └──────────────┘  └──────────┘  └────┬─────────┘
              │                               │
              ▼                               ▼
        ┌──────────────┐            ┌──────────────────┐
        │ScoreCircle   │            │┌────────┬────────┐│
        │.tsx          │            ││Details │  ATS.  ││
        │(分数圆)       │            ││.tsx    │  tsx   ││
        └──────────────┘            │└────────┴────────┘│
                                    │(详情和ATS分析)   │
                                    └──────────────────┘

说明:
- 箭头方向 = 数据流动方向
- root.tsx 是最顶层，其他都是它的子组件
- home 页面显示 ResumeCard，ResumeCard 显示 ScoreCircle
- resume 页面显示详细的 Summary, Details, ATS
```

---

## 7. 数据模型关系图

```
┌────────────────────────────────────────────────────────┐
│              Resume (简历数据结构)                     │
├────────────────────────────────────────────────────────┤
│                                                        │
│  id: "abc123"                                         │
│  ├─ 职位信息                                          │
│  │  ├─ companyName: "Google"                         │
│  │  └─ jobTitle: "Frontend Engineer"                 │
│  │                                                    │
│  ├─ 文件位置                                          │
│  │  ├─ resumePath: "/home/user/abc123.pdf"          │
│  │  └─ imagePath: "/home/user/abc123_preview.png"   │
│  │                                                    │
│  └─ 评分数据 (feedback)                              │
│     │                                                 │
│     ├─ overallScore: 85                              │
│     │  (总分: 0-100)                                 │
│     │                                                 │
│     └─ 5个维度的评分                                  │
│        │                                              │
│        ├─ ATS                                         │
│        │  └─ score: 90                               │
│        │  └─ tips: [                                 │
│        │       { type: "good", tip: "...", ... },   │
│        │       { type: "improve", tip: "...", ... }  │
│        │     ]                                        │
│        │                                              │
│        ├─ toneAndStyle                               │
│        │  └─ score: 88                               │
│        │  └─ tips: [...]                             │
│        │                                              │
│        ├─ content                                     │
│        │  └─ score: 80                               │
│        │  └─ tips: [...]                             │
│        │                                              │
│        ├─ structure                                   │
│        │  └─ score: 82                               │
│        │  └─ tips: [...]                             │
│        │                                              │
│        └─ skills                                      │
│           └─ score: 85                               │
│           └─ tips: [...]                             │
│                                                       │
└────────────────────────────────────────────────────────┘

数据存储位置:

┌─────────────────────┐  ┌──────────────────┐  ┌────────┐
│   Puter File System  │  │  Puter KV Store  │  │浏览器  │
│   (文件系统)          │  │  (数据库)        │  │内存    │
├─────────────────────┤  ├──────────────────┤  ├────────┤
│                     │  │                  │  │       │
│ /user/abc123.pdf    │  │ resume:abc123    │  │ Zustan│
│ (简历PDF原文)       │  │ → {             │  │ d存储  │
│                     │  │     id,         │  │       │
│ /user/abc123_      │  │     companyName,│  │使用中 │
│  preview.png       │  │     feedback    │  │的数据 │
│ (缩略图)            │  │   }             │  │       │
│                     │  │                  │  │       │
│持久保存            │  │持久保存          │  │临时   │
│(永不失效)          │  │(用户账号内)      │  │存储   │
└─────────────────────┘  └──────────────────┘  └────────┘

生命周期:

1. 用户上传 → 文件存储在 File System, 元数据存在 KV
2. 用户在浏览 → 数据在 Zustand 内存中
3. 用户关闭浏览器 → Zustand 数据清空 (刷新后重新读取)
4. 用户下次打开 → 从 KV Store 读取之前的数据
5. 用户点"清除" → 删除 KV 的所有数据，删除 File System 的所有文件
```

---

## 8. 总结：三层理解

当你学习这个项目时，记住这三层:

```
┌─────────────────────────────────────────┐
│   🎨 视觉层 (用户看到的)                │
│   ├─ 页面布局 (routes)                  │
│   ├─ UI组件 (components)                │
│   └─ 样式美化 (Tailwind CSS)            │
│   关键词: React, 组件, JSX, 好看的网页   │
├─────────────────────────────────────────┤
│   ⚙️ 逻辑层 (代码怎么工作的)           │
│   ├─ 状态管理 (Zustand)                 │
│   ├─ 函数和流程 (lib/)                  │
│   └─ 路由导航 (React Router)            │
│   关键词: 函数, 状态, 流程, 逻辑        │
├─────────────────────────────────────────┤
│   💾 数据层 (信息存在哪里)              │
│   ├─ 浏览器内存 (Zustand)               │
│   ├─ 云端文件 (Puter File System)       │
│   └─ 云端数据库 (Puter KV Store)        │
│   关键词: JSON, 数据库, 云存储, API     │
└─────────────────────────────────────────┘
```

---

## 练习：自己画一个

现在轮到你了！选一个你理解的东西，用ASCII图或文字描述它的结构：

- [ ] 你家的房间布局
- [ ] 一个快递的送达过程
- [ ] 一个网络直播的工作流程
- [ ] 你的一天的时间安排

**为什么要做这个？**
因为能解释=真的理解。如果你能用简单的图画来解释这个项目，说明你已经掌握了全貌。

---

## 下一步

准备好深入了吗？

- **想立即开始编码？** → 去 **03-stage1-foundation.md**
- **想了解所有术语？** → 去 **02-concept-dictionary.md**
- **想看代码示例？** → 去 **06-stage4-full-replication.md**

记住：**这个项目看起来复杂，其实只是把简单的积木堆起来。** 一块一块来，你就能搭出整座城堡。

🚀 开始你的编程之旅吧！
